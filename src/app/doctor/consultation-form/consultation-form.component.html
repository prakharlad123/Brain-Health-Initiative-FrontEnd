<div style="overflow: auto;height: 92vh;">
    <div class="container"
        style="border-radius:10px;background-color: #42A5F5; padding: 20px; margin-top: 30px; margin-bottom: 30px;">
        <div class="row">
            <div class="col-md-6">
                <button class="btn btn-primary" type="button" data-toggle="collapse" data-target="#collapseExample"
                    aria-expanded="false" aria-controls="collapseExample">
                    <b>Patient Name:</b> {{patient.first_name}} {{patient.last_name}}   <i class="fa fa-angle-down"></i>
                </button>
            </div>
            <div class="col-md-6 text-right">
                <button type="button" class="btn btn-primary p-2" style="width:200px" routerLink="/doctor/questionnaire">Go to Questionnaire</button>
            </div>
        </div>

        <div class="collapse" id="collapseExample">
            <form>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="name">Name</label>
                        <input type="text" class="form-control" id="name" [value]="name" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="abha_id">Abha ID</label>
                        <input type="text" class="form-control" id="abha_id" [value]="patient.abhaId" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="gender">Gender</label>
                        <input type="text" class="form-control" id="gender" [value]="patient.gender" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="mobileNumber">Mobile Number</label>
                        <input type="text" class="form-control" id="mobileNumber" [value]="patient.mobile_no" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="information_caregiver_name">Information Caregiver</label>
                        <input type="text" class="form-control" id="information_caregiver_name"
                            [value]="patient.information_caregiver_name" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="relationship_with_patient">Relationship With Patient</label>
                        <input type="text" class="form-control" id="relationship_with_patient"
                            [value]="patient.relationship_with_patient" readonly>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="dob">Date Of Birth</label>
                        <input type="text" class="form-control" id="dob" [value]="formatDate(patient.dob)" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="socioeconomic_status">Socioeconomic Status</label>
                        <input type="text" class="form-control" id="socioeconomic_status"
                            [value]="patient.socioeconomic_status" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="education">Education</label>
                        <input type="text" class="form-control" id="education" [value]="patient.education" readonly>
                    </div>
                </div>
                <div class="form-group">
                    <label for="address_line_1">Address</label>
                    <input type="text" class="form-control" id="address_line_1" [value]="patient.address_line_1"
                        readonly>
                </div>
                <div class="form-group">
                    <label for="address_line_2">Address 2</label>
                    <input type="text" class="form-control" id="address_line_2" [value]="patient.address_line_2"
                        readonly>
                </div>
                <div class="form-row">
                    <div class="form-group col-md-4">
                        <label for="district">Distict</label>
                        <input type="text" class="form-control" id="district" [value]="patient.district" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="state">State</label>
                        <input type="text" class="form-control" id="state" [value]="patient.state" readonly>
                    </div>
                    <div class="form-group col-md-4">
                        <label for="pin_code">Pincode</label>
                        <input type="text" class="form-control" id="pin_code" [value]="patient.pin_code" readonly>
                    </div>
                </div>
            </form>
        </div>
    </div>
    <div class="container"
        style="border-radius:10px;background-color: #42A5F5; padding: 20px; margin-top: 30px; margin-bottom: 30px;">
        <form [formGroup]="consultationForm" ngNativeValidate>
            <div class="form-row">
                <div class="form-group col-md-6">
                    <label for="name">Patient Name:</label>
                    <input type="text" class="form-control" id="name" name="name" formControlName="name"
                        placeholder="Name" readonly>
                </div>
                <div class="form-group col-md-6">
                    <label for="date">Date:</label>
                    <input type="date" class="form-control" id="date" name="date" formControlName="date"
                        placeholder="Date" readonly>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="diagnosisType">Diagnosis Type:</label>
                    <select class="form-control" id="diagnosisType" formControlName="diagnosisType" required>
                        <option value="DIFFERENTIAL" selected>Differential</option>
                        <option value="PROVISIONAL">Provisional</option>
                        <option value="TENTATIVE">Tentative</option>
                        <option value="FINAL">Final</option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="compliant">Compliant:</label>
                    <input type="text" class="form-control" id="compliant" name="compliant" formControlName="compliant"
                        placeholder="Compliant" required>
                </div>
                <div class="form-group col-md-4">
                    <label for="examination">Examination:</label>
                    <input type="text" class="form-control" id="examination" name="examination"
                        placeholder="Examination" formControlName="examination" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="icd10Code">ICD 10 Code: </label>
                    <select class="form-control" id="icd10Code" formControlName="icd10Code" required>
                        <option selected>G40</option>
                        <option>I63</option>
                        <option>R51</option>
                        <option>F03</option>
                    </select>
                </div>
                <div class="form-group col-md-4">
                    <label for="icdDescription">ICD Description:</label>
                    <input type="text" class="form-control" id="icdDescription" name="icdDescription"
                        formControlName="icdDescription" placeholder="Description" required>
                </div>
                <div class="form-group col-md-4">
                    <label for="instructions">Treatment Instructions:</label>
                    <input type="text" class="form-control" id="instructions" name="instructions"
                        formControlName="instructions" placeholder="Instructions" required>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-4">
                    <label for="improvementType">Improvement Type: </label>
                    <select class="form-control" id="improvementType" formControlName="improvementType" required>
                        <option value="CONDITION_IMPROVED" selected>Condition Improved</option>
                        <option value="CONDITION_WORSENED">Condition Worsened</option>
                        <option value="CONDITION_UNCHANGED">Condition Unchanged</option>
                    </select>
                </div>
                <div class="form-group col-md-8">
                    <label for="illnessSummary">Illness Summary: </label>
                    <input type="text" class="form-control" id="illnessSummary" name="illnessSummary"
                        formControlName="illnessSummary" placeholder="Summary" required>
                </div>
            </div>
            <div class="form-row">
                <table class="table table-bordered" formArrayName="medicines">
                    <tr>
                        <th colspan="2">Add Medicines:</th>
                        <th></th>
                        <th></th>
                        <th width="150px"><button type="button" [disabled]="medicines().value[medicines().value.length-1]!==undefined && medicines().value[medicines().value.length-1].medicineName===''" (click)="addMedicine()"  class="btn btn-primary" style="background-color: #0d6efd;">Add More</button></th>
                    </tr>
                    <tr *ngFor="let medicine of medicines().controls; let i=index" [formGroupName]="i">
                        <td>
                            Name:
                            <input type="text" id="medicineName" formControlName="medicineName" class="form-control" style="background-color: white;">
                        </td>
                        <td>
                            Dosage:
                            <input type="text" id="dosage" formControlName="dosage" class="form-control" style="background-color: white;">
                        </td>
                        <td>
                            Remarks:
                            <input type="text" id="remarks" formControlName="remarks" class="form-control" style="background-color: white;">
                        </td>
                        <td>
                            Duration (days):
                            <input type="text" id="duration" formControlName="duration" class="form-control" style="background-color: white;">
                        </td>
                        <td>
                            <button (click)="removeMedicine(i)" class="btn btn-danger" style="background-color: rgb(255, 38, 38);">Remove</button>
                        </td>
                    </tr>
                </table>
            </div>
            <div class="form-row">
                <div class="form-group col-md-12">
                    <label for="remarks">Remarks:</label>
                    <textarea type="text" class="form-control" id="remarks" name="remarks" formControlName="remarks"
                        placeholder="Remarks"></textarea>
                </div>
            </div>
            <div class="form-row" *ngIf="questionnaireConclusion!==''">
                <div class="form-group col-md-12">
                    <label for="remarks">Questionnaire Conclusion:</label>
                    <textarea type="text" class="form-control" id="conclusion" name="conclusion"
                        formControlName="conclusion" placeholder="Conclusion"
                        readonly>{{questionnaireConclusion}}</textarea>
                </div>
            </div>
            <div class="form-row">
                <div class="form-group col-md-3">
                    <label for="furtherInstructions">Further Instructions:</label>
                    <select class="form-control" formControlName="furtherInstructions" id="furtherInstructions"
                        (change)="onChange($event)">
                        <option>Follow-up</option>
                        <option>Refer</option>
                        <option>In-patient</option>
                        <option>Review SOS</option>
                    </select>
                </div>
                <div *ngIf="optionValue=='Follow-up'" class="form-group col-md-4">
                    <label for="followUp">Follow-up Date:</label>
                    <input type="date" class="form-control" id="followUp" name="followUp" formControlName="followUp"
                        placeholder="Follow-up" required>
                </div>
                <div *ngIf="optionValue=='Refer'" class="form-group col-md-8">
                    <div class="form-row">
                        <div class="form-group col-md-4">
                            <label for="doctorRole">Doctor level: </label>
                            <select class="form-control" formControlName="doctorRole" id="doctorRole"
                                (change)="onRoleChange($event)" required>
                                <option *ngFor="let role of doctorRoles" [value]="role.roleId">{{role.roleName}}
                                </option>
                            </select>
                        </div>
                        <div class="form-group col-md-4">
                            <label for="doctorName">Doctor: </label>
                            <select class="form-control" formControlName="doctorName" id="doctorName" required>
                                <!-- <option selected>Select doctor level first</option> -->
                                <option *ngFor="let doctor of doctors" [value]="doctor.doctor.userId">Dr.
                                    {{doctor.firstName}} {{doctor.lastName}}</option>
                            </select>
                        </div>
                    </div>
                </div>
            </div>
            <button type="submit" class="btn btn-primary" routerLink="/doctor/search-patient">Back</button>
            <button type="submit" class="btn btn-primary float-right" (click)="create()">Submit</button>
        </form>
    </div>
</div>